---
title: 'next/imageのimages.domainsに共用ドメインを使用すると危ないかも'
emoji: '⚠'
type: 'tech' # tech: 技術記事 / idea: アイデア
topics: [nextjs]
published: false
---

# TL;DR

- 外部画像を最適化する場合、最適化を許可する画像URLのドメインを`next.config.js`の`images.domains`に指定する
- クラウド系ストレージ(Storage as a Service)等を利用していて、**サブディレクトリ**でテナントを切り分ける方式の場合、**任意のテナントの画像を表示・圧縮し放題**
  - 例：Google Cloud Storage（storage.googleapis.com）
- もちろんCPUリソースは自分のところのものが使われる
- しかも自分のサイトのドメインのコンテンツとして発信される
- 危なくない?

<!-- 皆さんNext.jsのnext/images使ってますか?
サイト内外を問わず、圧縮や -->
